!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}({0:function(e,t,n){var i=n(1);function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){if(!e)return!1;for(var t=[/^(http|https):\/\/www.google.(co.uk|com)/g,/^(http|https):\/\/www.bing.com\/search/g,/^(http|https):\/\/uk.search.yahoo.com\/search/g],n=0;n<t.length;n++)if(e.match(t[n]))return!0;return!1}function a(e){return/https?:\/\/(.*)giveasyoulive.(com|uk)/g.test(e)}function s(e,t,n){var i=document.createElement(e);return o(t)?t.forEach(function(e){e&&i.classList.add(e)}):t&&i.classList.add(t),n&&(i.textContent=n),i}e.exports={contentScriptInitialise:function(e,t){window.top===window&&("undefined"!=typeof safari?t&&new e:new e)},createError:function(e){var t=new Error;return t.type=e,t},dom:s,findParentWithClassName:function(e,t){for(var n=e;!n.classList.contains(t);)if(null===(n=n.parentNode))return null;return n},forEach:function(e,t){for(var n=0;n<e.length;n++)t(e[n])},getTimestamp:function(){return Date.now()},getDayAndYear:function(){var e=new Date;return e.getDay()+1+"-"+(e.getYear()+1900)},getGaylUrl:function(e){if(!e)return i.gaylUrl;var t=0===e.indexOf("/");return i.gaylUrl+(t?"":"/")+e},getLastItem:function(e){return o(e)?0==e.length?null:e[e.length-1]:null},hasProperties:function(e,t){return!t||!t.length||(t.forEach(function(t){if(!e.hasOwnProperty(t))return!1}),!0)},img:function(e,t,n){var i=s("img",n);return i.src=e,i.alt=t,i},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},isArray:o,isClickthrough:function(e){return!!e&&e.indexOf("statistics/gayl/clickthrough")>0},isGiveasyouLive:a,isGiveasyouLiveEmail:function(e){return!!e&&e.indexOf("giveasyoulive-emails.com")>0},isMajorVersionUpdate:function(e,t){if(!t)return!1;if(!e&&t)return!0;for(var n=e.split("."),i=t.split("."),o=0;o<n.length;o++){if(i[o]>n[o])return!0;if(1===o)return!1}},isSerp:r,isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isRetailerPage:function(e){return!a(e)&&!r(e)},isUndefined:function(e){return void 0===e},logObject:function(e){if(!e)return"";var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+",");return t},markFavourites:function(e,t){e=e||[];var n=(t=t||[]).map(function(e){return e.id});return e.forEach(function(e){e.isFavourite=n.includes(e.id)}),e},removeChildren:function(e){if(e&&e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild)},text:function(e){return document.createTextNode(e)},toBoolean:function(e){return"true"===e},truncateCauseName:function(e,t){var n=e.name.length;return e.truncatedName=n<t?e.name:e.name.substring(0,t-"...".length)+"...",e},svgDom:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return t?(o(t)?t.forEach(function(e){e&&n.classList.add(e)}):n.classList.add(className),n):n},whenDocumentReady:function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}}},1:function(e,t,n){const i=n(7);e.exports=Object.assign({...i},{apiBase:"https://www.giveasyoulive.com/api/v1/",apiBaseV2:"https://www.giveasyoulive.com/api/v2/",env:"production",gaylDomain:"giveasyoulive.com",gaylUrl:"https://www.giveasyoulive.com"})},2:function(e,t){var n;"undefined"!=typeof chrome&&chrome.runtime&&(n=chrome.runtime),"undefined"!=typeof browser&&browser.runtime&&(n=browser.runtime),n||(n={getManifest:function(){return{version:safari.extension.displayVersion}},getURL:function(e){return e},lastError:void 0,onInstalled:{addListener:function(e){if(console.log("runtime.onInstalled("+safari.extension.displayVersion+" -> "+safari.extension.settings.installedVersion+")"),!safari.extension.settings.installedVersion)return safari.extension.settings.installedVersion=safari.extension.displayVersion,void e({reason:"install"});e({reason:"update",previousVersion:safari.extension.settings.installedVersion}),safari.extension.settings.installedVersion=safari.extension.displayVersion}},onMessage:{addListener:function(e){safari.application?safari.application.addEventListener("message",function(t){console.log("safari.application event",t);var n={subject:t.name,payload:t.message};e(n,{id:"synthetic"},function(){})}):safari.self.addEventListener("message",function(t){console.log("safari.self event",t);var n={subject:t.name,payload:t.message};e(n,{id:"synthetic"},function(){})})}},sendMessage:function(e,t){safari.self.tab.dispatchMessage(e.subject,e.payload)},setUninstallURL(e){}}),e.exports=n},20:function(e,t,n){var{svgDom:i}=n(0);e.exports=function(){var e=i("svg",["svg-inline--fa","fa-angle-right","fa-w-8","fa-fw"]);e.setAttribute("role","img"),e.setAttribute("aria-hidden",!0),e.setAttribute("viewBox","0 0 256 512");var t=i("path");return t.setAttribute("fill","currentColor"),t.setAttribute("d","M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"),e.appendChild(t),e}},23:function(e,t){e.exports={SIDEBAR:"SIDEBAR",SIDEBAR_TURNON:"SIDEBAR_TURNON",SIDEBAR_FAVOURITE:"SIDEBAR_FAVOURITE",RETAILER:"RETAILER"}},3:function(e,t){e.exports={POPUP_LOADING_ACCOUNT_OPTIONS:"Loading account...",POPUP_LOADING_CAUSE_INFO:"Loading cause...",POPUP_LOADING_FAVOURITES:"Loading favourites...",POPUP_LOADING_GLOBAL:"Loading...please wait.",POPUP_LOADING_SIMILAR_STORES:"Loading similar stores...",POPUP_LOADING_POPULAR_STORES:"Loading popular stores...",POPUP_LOADING_STORE_SEARCH:"Searching...",POPUP_NO_FAVOURITES:"No favourite stores yet. Why not try adding some?",POPUP_NO_SIMILAR_STORES:"No similar stores were found for this retailer.",POPUP_NO_SEARCH_RESULTS:"No results found for $$query$$.",ERROR_TIMEOUT_POPUP:"An error occured, please close, and re-open this popup. If the problem persists, please let us know @ help@everyclick.com",ERROR_ACCOUNT_OPTION_LOAD:"Failed to load, please re-open to try again.",STORE_CONFIRMATION_DIALOG_QUESTION:"Would you like your purchase to raise a donation for $$causeName$$?",STORE_CONFIRMATION_DIALOG_EARN_NEW_CUSTOMERS:"Earn up to $$maxStoreRate$$ with $$storeName$$ if you're a new customer",STORE_CONFIRMATION_DIALOG_EARN:"Earn up to $$maxStoreRate$$ with $$storeName$$",STORE_CONFIRMATION_DIALOG_YES:"Raise a donation",STORE_THANK_YOU_OK:"OK, got it",STORE_THANK_YOU_INTRO:"Thank you.",STORE_THANK_YOU_BODY_NEW_CUSTOMERS:"If you're a new customer, purchases can raise up to $$maxStoreRate$$ of your total purchase for $$causeName$$.",STORE_THANK_YOU_BODY:"Purchases can raise up to $$maxStoreRate$$ of your total purchase for $$causeName$$.",SERP_BUTTON_TEXT:"Shop & raise up to $$maxStoreRate$$ >",SERP_LINK_TEXT:"Donates up to $$maxStoreRate$$",API_ERROR_MESSAGES:{InvalidCredentials:"Invalid email or password."},REQUEST_ERROR_MESSAGES:{0:"The request timed out, please try again."},GENERIC_ERROR_MESSAGE:"An error occurred."}},38:function(e,t,n){var i=n(3),{dom:o,text:r}=n(0),a=n(20);e.exports=function(e){var t=e.causeName||"your charity",n=o("div",["thank-you-dialog","reset-this"]);n.setAttribute("id","gayl-donation-reminder-root");var s=o("p",["thank-you-dialog__message","reset-this"]);s.appendChild(o("strong",["reset-this"],i.STORE_THANK_YOU_INTRO));var u=function(e,t,n){var i=o("p",["thank-you-dialog__message","reset-this"]),a=e.split("$$maxStoreRate$$"),s=a[0];i.appendChild(r(s)),i.appendChild(o("strong",["reset-this"],n));var u=a[1];return s=(a=u.split("$$causeName$$"))[0],u=a[1],i.appendChild(r(s)),i.appendChild(o("strong",["reset-this"],t)),u&&i.appendChild(r(u)),i}(e.newCustomersOnly?i.STORE_THANK_YOU_BODY_NEW_CUSTOMERS:i.STORE_THANK_YOU_BODY,t,e.maxStoreRate),c=o("a",["thank-you-dialog__action","btn","btn-default","btn-lg","js-thankyou-ok","reset-this"],i.STORE_THANK_YOU_OK);return c.appendChild(r(" ")),c.appendChild(a()),n.appendChild(s),n.appendChild(u),n.appendChild(c),n}},39:function(e,t,n){var{dom:i,text:o}=n(0),r=n(3),a=n(20),s=n(2);e.exports=function(e){var t=e.causeName||"your charity",n=i("div",["reset-this","confirmation-dialog"]);n.setAttribute("id","gayl-donation-reminder-root");var u=i("img",["confirmation-dialog__logo","reset-this"]);u.src=s.getURL("/images/online.svg");var c=function(e,t){var n=i("p",["confirmation-dialog__question","reset-this"]),r=e.split("$$causeName$$"),a=r[0],s=r[1];return a&&n.appendChild(o(a)),n.appendChild(i("strong",["reset-this"],t)),s&&n.appendChild(o(s)),n}(r.STORE_CONFIRMATION_DIALOG_QUESTION,t),l=i("p",["confirmation-dialog__earn","reset-this"]),d=e.newCustomersOnly?r.STORE_CONFIRMATION_DIALOG_EARN_NEW_CUSTOMERS:r.STORE_CONFIRMATION_DIALOG_EARN;d=d.replace("$$storeName$$",e.storeName).replace("$$maxStoreRate$$",e.maxStoreRate),l.appendChild(o(d));var f=i("a",["btn","btn-primary","btn-lg","js-retailer-confirm","reset-this"],r.STORE_CONFIRMATION_DIALOG_YES);f.appendChild(o(" ")),f.appendChild(a());var m=i("img",["js-retailer-decline","confirmation-dialog__close","reset-this"]);return m.src=s.getURL("/images/close-icon.svg"),n.appendChild(u),n.appendChild(c),n.appendChild(l),n.appendChild(f),n.appendChild(m),n}},4:function(e,t){e.exports=function(e){var t=e||navigator.userAgent;return/edg([ea]|ios)/i.test(t)?"Edge":/chrome|crios|crmo/i.test(t)?"Chrome":/safari|applewebkit/i.test(t)?"Safari":/firefox|iceweasel|fxios/i.test(t)?"Firefox":null}},40:function(e,t,n){var{contentScriptInitialise:i,isRetailerPage:o,whenDocumentReady:r}=n(0),{Message:a,MessageSubject:s}=n(6),u=(n(59),n(1)),c=n(39),l=n(23),d=n(2),f=n(38),m="#gayl-donation-reminder-root.confirmation-dialog",h="#gayl-donation-reminder-root",p="#gayl-donation-reminder-root.thank-you-dialog";function E(e){var t=document.querySelector(e);if(null!==t){var n=t.parentNode;null!==n&&n.removeChild(t)}}i(class{constructor(){this.bindEvents();var e=window.location.href.indexOf("inject=confirmation")>-1,t=window.location.href.indexOf("inject=thankyou")>-1;e&&this.injectConfirmationDialog({name:"Totally not Starlight"},{max:"£10.00",name:"Amazon",newCustomersOnly:!0}),t&&this.injectThankYou({name:"Totally not Starlight"},{max:"100%",newCustomersOnly:!0})}bindEvents(){d.onMessage.addListener(this.onMessage.bind(this))}bindConfirmationDialogEvents(){this.ui={confirmButton:document.querySelector(".js-retailer-confirm"),declineButton:document.querySelector(".js-retailer-decline")},this.ui.confirmButton.addEventListener("click",this.onConfirmation.bind(this)),this.ui.declineButton.addEventListener("click",this.onDecline.bind(this))}bindThankYouEventHandlers(){this.ui={okButton:document.querySelector(".js-thankyou-ok")},this.ui.okButton.addEventListener("click",this.onClickOk.bind(this))}onMessage(e,t,n){var{payload:i,subject:o}=e;switch(o){case s.RETAILER_CONFIRMATION:this.injectConfirmationDialog(i.cause,i.store);break;case s.RETAILER_THANKYOU:this.injectThankYou(i.cause,i.store);break;case s.HIDE_CONFIRMATION:this.removeConfirmationDialog();break;case s.REMOVE_ALL:this.removeAllDialogs();break;default:console.warn("Unable to handle event - "+o)}return!0}onClickOk(e){this.hideThankYou()}removeAllDialogs(){E(h)}injectConfirmationDialog(e,t){var n=this;r(function(){if(!n.isInjected()){var i=c({causeName:e&&e.name||null,storeName:t.name,maxStoreRate:t.max,newCustomersOnly:t.newCustomersOnly});document.body.insertBefore(i,document.body.firstChild),n.bindConfirmationDialogEvents()}})}injectThankYou(e,t){var n=this;r(function(){if(!n.isThankYouInjected()){n.isConfirmationInjected()&&(console.log("Found an existing confirmation dialog, removing all dialogs."),n.removeAllDialogs());var i={causeName:e&&e.name||null,maxStoreRate:t.max,newCustomersOnly:t.newCustomersOnly},o=f(i);document.body.insertBefore(o,document.body.firstChild),n.bindThankYouEventHandlers(),setTimeout(function(){n.hideThankYou()},u.thankYouDialogVisibleMs)}})}hideThankYou(){document.querySelector(p).classList.add("is-hidden")}removeConfirmationDialog(){E(m)}onDecline(){this.sendMessageToBackground(new a(s.RETAILER_REJECT))}onConfirmation(){this.sendMessageToBackground(new a(s.RETAILER_CONFIRM,{extensionSource:l.RETAILER}))}sendMessageToBackground(e){d.sendMessage(e)}isInjected(){return null!==document.querySelector(h)}isThankYouInjected(){return null!==document.querySelector(p)}isConfirmationInjected(){return null!==document.querySelector(m)}},o(window.location.href))},59:function(e,t){},6:function(e,t){var n={RETAILER_CONFIRMATION:"RETAILER_CONFIRMATION",RETAILER_THANKYOU:"RETAILER_THANKYOU",HIDE_CONFIRMATION:"HIDE_CONFIRMATION",REMOVE_ALL:"REMOVE_ALL",GET_SERP_RULES_RESPONSE:"GET_SERP_RULES_RESPONSE",CHECK_SERP_URLS_RESPONSE:"CHECK_SERP_URLS_RESPONSE",RETAILER_CONFIRM:"RETAILER_CONFIRM",RETAILER_REJECT:"RETAILER_REJECT",GET_SERP_RULES:"GET_SERP_RULES",CHECK_SERP_URLS:"CHECK_SERP_URLS"};function i(e,t){t=t||{};this.isValidSubject(e)&&(this.subject=e),this.payload=t}i.prototype.isValidSubject=function(e){if(!n[e])throw new Error("Unknown message subject: "+e);return!0},e.exports={Message:i,MessageSubject:n}},7:function(e,t,n){var i=n(4),o=n(2),r={Chrome:"R0FZTF9CUk9XU0VSX0VYVF9DSFJPTUU6MnZMTG4qSkpyX3ZEOT1hKg==",Firefox:"R0FZTF9CUk9XU0VSX0VYVF9GSVJFRk9YOnRBM3lOWEJQWmR1YyVHTG0=",Edge:"R0FZTF9CUk9XU0VSX0VYVF9FREdFOmZ2Qmg4VHdMUDRHelNTQFI=",Safari:"R0FZTF9CUk9XU0VSX0VYVF9TQUZBUkk6LTZyRHZBJGREeHFHOW45Pw=="};e.exports={apiAuthHeader:function(){var e=i(),t=r[e];if(!t)throw new Error("Cannot find auth header for "+e);return"Basic "+t},extensionId:function(){return"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.id:"undefined"!=typeof safari?"synthetic":browser.runtime.id},ignoredSchemes:["about","file","chrome","chrome-extension","wyciwyg"],ignoredUrls:"(?:shareasale.com|paypal.(?:co.uk|com)|successfultogether.co.uk|tradedoubler.com|clkuk.pvnsolutions.com|paidonresults.net|linksynergy.com|doubleclick.net|affiliatefuture.com|omguk.com|healthtrader.com|digitalriver.com|veinteractive.com|track.webgains.com)",permissionsUrl:"https://help.giveasyoulive.com/hc/en-us/articles/360017448352-New-Chrome-update-Donation-Reminder",processingDelayMs:1e3,requestTimeoutMs:7e3,sentryDsn:"https://7a19d517524a4954bb10e4bc21e4a4a9@sentry.io/1270266",thankYouDialogVisibleMs:7e3,uninstallUrl:"https://r1.dotmailer-surveys.com/7e21zb6c-623a1ufe",version:function(){return o.getManifest().version}}}});
//# sourceMappingURL=retailerContent.bundle.js.map