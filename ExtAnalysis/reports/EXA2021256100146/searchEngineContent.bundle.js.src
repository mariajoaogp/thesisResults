!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=41)}({0:function(e,t,n){var r=n(1);function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){if(!e)return!1;for(var t=[/^(http|https):\/\/www.google.(co.uk|com)/g,/^(http|https):\/\/www.bing.com\/search/g,/^(http|https):\/\/uk.search.yahoo.com\/search/g],n=0;n<t.length;n++)if(e.match(t[n]))return!0;return!1}function s(e){return/https?:\/\/(.*)giveasyoulive.(com|uk)/g.test(e)}function a(e,t,n){var r=document.createElement(e);return o(t)?t.forEach(function(e){e&&r.classList.add(e)}):t&&r.classList.add(t),n&&(r.textContent=n),r}e.exports={contentScriptInitialise:function(e,t){window.top===window&&("undefined"!=typeof safari?t&&new e:new e)},createError:function(e){var t=new Error;return t.type=e,t},dom:a,findParentWithClassName:function(e,t){for(var n=e;!n.classList.contains(t);)if(null===(n=n.parentNode))return null;return n},forEach:function(e,t){for(var n=0;n<e.length;n++)t(e[n])},getTimestamp:function(){return Date.now()},getDayAndYear:function(){var e=new Date;return e.getDay()+1+"-"+(e.getYear()+1900)},getGaylUrl:function(e){if(!e)return r.gaylUrl;var t=0===e.indexOf("/");return r.gaylUrl+(t?"":"/")+e},getLastItem:function(e){return o(e)?0==e.length?null:e[e.length-1]:null},hasProperties:function(e,t){return!t||!t.length||(t.forEach(function(t){if(!e.hasOwnProperty(t))return!1}),!0)},img:function(e,t,n){var r=a("img",n);return r.src=e,r.alt=t,r},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},isArray:o,isClickthrough:function(e){return!!e&&e.indexOf("statistics/gayl/clickthrough")>0},isGiveasyouLive:s,isGiveasyouLiveEmail:function(e){return!!e&&e.indexOf("giveasyoulive-emails.com")>0},isMajorVersionUpdate:function(e,t){if(!t)return!1;if(!e&&t)return!0;for(var n=e.split("."),r=t.split("."),o=0;o<n.length;o++){if(r[o]>n[o])return!0;if(1===o)return!1}},isSerp:i,isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isRetailerPage:function(e){return!s(e)&&!i(e)},isUndefined:function(e){return void 0===e},logObject:function(e){if(!e)return"";var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+",");return t},markFavourites:function(e,t){e=e||[];var n=(t=t||[]).map(function(e){return e.id});return e.forEach(function(e){e.isFavourite=n.includes(e.id)}),e},removeChildren:function(e){if(e&&e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild)},text:function(e){return document.createTextNode(e)},toBoolean:function(e){return"true"===e},truncateCauseName:function(e,t){var n=e.name.length;return e.truncatedName=n<t?e.name:e.name.substring(0,t-"...".length)+"...",e},svgDom:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return t?(o(t)?t.forEach(function(e){e&&n.classList.add(e)}):n.classList.add(className),n):n},whenDocumentReady:function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}}},1:function(e,t,n){const r=n(7);e.exports=Object.assign({...r},{apiBase:"https://www.giveasyoulive.com/api/v1/",apiBaseV2:"https://www.giveasyoulive.com/api/v2/",env:"production",gaylDomain:"giveasyoulive.com",gaylUrl:"https://www.giveasyoulive.com"})},2:function(e,t){var n;"undefined"!=typeof chrome&&chrome.runtime&&(n=chrome.runtime),"undefined"!=typeof browser&&browser.runtime&&(n=browser.runtime),n||(n={getManifest:function(){return{version:safari.extension.displayVersion}},getURL:function(e){return e},lastError:void 0,onInstalled:{addListener:function(e){if(console.log("runtime.onInstalled("+safari.extension.displayVersion+" -> "+safari.extension.settings.installedVersion+")"),!safari.extension.settings.installedVersion)return safari.extension.settings.installedVersion=safari.extension.displayVersion,void e({reason:"install"});e({reason:"update",previousVersion:safari.extension.settings.installedVersion}),safari.extension.settings.installedVersion=safari.extension.displayVersion}},onMessage:{addListener:function(e){safari.application?safari.application.addEventListener("message",function(t){console.log("safari.application event",t);var n={subject:t.name,payload:t.message};e(n,{id:"synthetic"},function(){})}):safari.self.addEventListener("message",function(t){console.log("safari.self event",t);var n={subject:t.name,payload:t.message};e(n,{id:"synthetic"},function(){})})}},sendMessage:function(e,t){safari.self.tab.dispatchMessage(e.subject,e.payload)},setUninstallURL(e){}}),e.exports=n},3:function(e,t){e.exports={POPUP_LOADING_ACCOUNT_OPTIONS:"Loading account...",POPUP_LOADING_CAUSE_INFO:"Loading cause...",POPUP_LOADING_FAVOURITES:"Loading favourites...",POPUP_LOADING_GLOBAL:"Loading...please wait.",POPUP_LOADING_SIMILAR_STORES:"Loading similar stores...",POPUP_LOADING_POPULAR_STORES:"Loading popular stores...",POPUP_LOADING_STORE_SEARCH:"Searching...",POPUP_NO_FAVOURITES:"No favourite stores yet. Why not try adding some?",POPUP_NO_SIMILAR_STORES:"No similar stores were found for this retailer.",POPUP_NO_SEARCH_RESULTS:"No results found for $$query$$.",ERROR_TIMEOUT_POPUP:"An error occured, please close, and re-open this popup. If the problem persists, please let us know @ help@everyclick.com",ERROR_ACCOUNT_OPTION_LOAD:"Failed to load, please re-open to try again.",STORE_CONFIRMATION_DIALOG_QUESTION:"Would you like your purchase to raise a donation for $$causeName$$?",STORE_CONFIRMATION_DIALOG_EARN_NEW_CUSTOMERS:"Earn up to $$maxStoreRate$$ with $$storeName$$ if you're a new customer",STORE_CONFIRMATION_DIALOG_EARN:"Earn up to $$maxStoreRate$$ with $$storeName$$",STORE_CONFIRMATION_DIALOG_YES:"Raise a donation",STORE_THANK_YOU_OK:"OK, got it",STORE_THANK_YOU_INTRO:"Thank you.",STORE_THANK_YOU_BODY_NEW_CUSTOMERS:"If you're a new customer, purchases can raise up to $$maxStoreRate$$ of your total purchase for $$causeName$$.",STORE_THANK_YOU_BODY:"Purchases can raise up to $$maxStoreRate$$ of your total purchase for $$causeName$$.",SERP_BUTTON_TEXT:"Shop & raise up to $$maxStoreRate$$ >",SERP_LINK_TEXT:"Donates up to $$maxStoreRate$$",API_ERROR_MESSAGES:{InvalidCredentials:"Invalid email or password."},REQUEST_ERROR_MESSAGES:{0:"The request timed out, please try again."},GENERIC_ERROR_MESSAGE:"An error occurred."}},4:function(e,t){e.exports=function(e){var t=e||navigator.userAgent;return/edg([ea]|ios)/i.test(t)?"Edge":/chrome|crios|crmo/i.test(t)?"Chrome":/safari|applewebkit/i.test(t)?"Safari":/firefox|iceweasel|fxios/i.test(t)?"Firefox":null}},41:function(e,t,n){var{Message:r,MessageSubject:o}=n(6),{contentScriptInitialise:i,isSerp:s,insertAfter:a,forEach:u,whenDocumentReady:c,dom:l,text:d}=n(0),{SERP_BUTTON_TEXT:f,SERP_LINK_TEXT:h}=n(3),E=(n(61),n(1),n(2)),R=window.location.href.indexOf("debug=true")>-1;class p{constructor(){this.rules=null,this.host=window.location.hostname,this.extracted=[],this.domParser=new DOMParser,this.bindEventHandlers(),this.requestRules()}bindEventHandlers(){E.onMessage.addListener(this.onMessage.bind(this))}log(){for(var e=0;e<this.extracted.length;e++){var{url:t,visibleLink:n,title:r}=this.extracted[e];console.log(e+1,r.textContent,t)}}requestRules(){E.sendMessage(new r(o.GET_SERP_RULES))}onMessage(e,t,n){var{payload:r,subject:i}=e;switch(console.log("SERP content script received message",e),i){case o.GET_SERP_RULES_RESPONSE:this.onRulesReceived(e);break;case o.CHECK_SERP_URLS_RESPONSE:this.onUrlsChecked(r);break;default:console.warn("Unable to handle event - "+i)}return!0}onRulesReceived(e){if(this.rules=e.payload[this.host]||null,null!==this.rules){this.addSerpClassToBodyElement();var t="YAHOO"===this.rules.serpProvider?100:0;setTimeout(function(){if(this.extract()){var e=this.extracted.map(function(e){return{url:e.url}});E.sendMessage(new r(o.CHECK_SERP_URLS,e))}else R&&console.log("Failed to extract URLs from SERP",this.rules,this.host)}.bind(this),t)}else console.log("No rules found for host:",this.host)}addSerpClassToBodyElement(){document.body.classList.add("gayl-serp-"+this.rules.serpProvider)}onUrlsChecked(e){this.injectGlobalCss(),this.injectUi(e)}extract(){console.log("Extracting URLs from:",this.host,"using rules:",this.rules);var e=document.querySelectorAll(this.rules.containerSelector),t=this;return u(e,function(e){var n=e.querySelector(t.rules.donationRateSelector),r=e.querySelector(t.rules.titleSelector),o=e.querySelector(t.rules.visibleLinkSelector),i=e.querySelector(t.rules.urlSelector);g(i,"#ff919154"),g(o,"#91ffb454"),g(r,"#ff919154"),g(e,"#ccc"),t.extracted.push({container:e,title:r,visibleLink:o,url:i.href,urlContainer:i,donationRateTarget:n})}),R&&(console.log("Extracted:"),this.log()),this.extracted.length>0}injectGlobalCss(){var e=l("style");e.type="text/css",e.appendChild(d(this.rules.additionalCss)),document.head.appendChild(e)}injectUi(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.extracted[t],o=n.merchant,i=r.title,s=r.visibleLink,a=r.container,u=(r.urlContainer,r.donationRateTarget);if(!i||!s)return;o&&"Y"===o.notification&&(this.injectLogoAndStoreRate(u,o),this.injectTurnOnButton(a,o))}}injectLogoAndStoreRate(e,t){var n=l("span","gayl-logo"),r=l("span","gayl-store-rate"),o=h.replace("$$maxStoreRate$$",this.getStoreRateText(t));r.appendChild(d(o));var i=l("a","gayl-container");i.href=t.clickthroughUrl,i.appendChild(n),i.appendChild(r),a(i,e)}injectTurnOnButton(e,t){a(this.createButton(t),e)}getStoreRateText(e){if(e&&e.max)return this.domParser.parseFromString(e.max,"text/html").documentElement.textContent}createButton(e){if(e&&e.max){var t=f.replace("$$maxStoreRate$$",this.getStoreRateText(e)),n=l("a",["btn","btn-success","gayl-button"],t);return n.href=e.clickthroughUrl,n}}}function g(e,t){R&&null!=e&&e.style&&(e.style.backgroundColor=t)}c(function(){i(p,s(window.location.href))})},6:function(e,t){var n={RETAILER_CONFIRMATION:"RETAILER_CONFIRMATION",RETAILER_THANKYOU:"RETAILER_THANKYOU",HIDE_CONFIRMATION:"HIDE_CONFIRMATION",REMOVE_ALL:"REMOVE_ALL",GET_SERP_RULES_RESPONSE:"GET_SERP_RULES_RESPONSE",CHECK_SERP_URLS_RESPONSE:"CHECK_SERP_URLS_RESPONSE",RETAILER_CONFIRM:"RETAILER_CONFIRM",RETAILER_REJECT:"RETAILER_REJECT",GET_SERP_RULES:"GET_SERP_RULES",CHECK_SERP_URLS:"CHECK_SERP_URLS"};function r(e,t){t=t||{};this.isValidSubject(e)&&(this.subject=e),this.payload=t}r.prototype.isValidSubject=function(e){if(!n[e])throw new Error("Unknown message subject: "+e);return!0},e.exports={Message:r,MessageSubject:n}},61:function(e,t){},7:function(e,t,n){var r=n(4),o=n(2),i={Chrome:"R0FZTF9CUk9XU0VSX0VYVF9DSFJPTUU6MnZMTG4qSkpyX3ZEOT1hKg==",Firefox:"R0FZTF9CUk9XU0VSX0VYVF9GSVJFRk9YOnRBM3lOWEJQWmR1YyVHTG0=",Edge:"R0FZTF9CUk9XU0VSX0VYVF9FREdFOmZ2Qmg4VHdMUDRHelNTQFI=",Safari:"R0FZTF9CUk9XU0VSX0VYVF9TQUZBUkk6LTZyRHZBJGREeHFHOW45Pw=="};e.exports={apiAuthHeader:function(){var e=r(),t=i[e];if(!t)throw new Error("Cannot find auth header for "+e);return"Basic "+t},extensionId:function(){return"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.id:"undefined"!=typeof safari?"synthetic":browser.runtime.id},ignoredSchemes:["about","file","chrome","chrome-extension","wyciwyg"],ignoredUrls:"(?:shareasale.com|paypal.(?:co.uk|com)|successfultogether.co.uk|tradedoubler.com|clkuk.pvnsolutions.com|paidonresults.net|linksynergy.com|doubleclick.net|affiliatefuture.com|omguk.com|healthtrader.com|digitalriver.com|veinteractive.com|track.webgains.com)",permissionsUrl:"https://help.giveasyoulive.com/hc/en-us/articles/360017448352-New-Chrome-update-Donation-Reminder",processingDelayMs:1e3,requestTimeoutMs:7e3,sentryDsn:"https://7a19d517524a4954bb10e4bc21e4a4a9@sentry.io/1270266",thankYouDialogVisibleMs:7e3,uninstallUrl:"https://r1.dotmailer-surveys.com/7e21zb6c-623a1ufe",version:function(){return o.getManifest().version}}}});
//# sourceMappingURL=searchEngineContent.bundle.js.map