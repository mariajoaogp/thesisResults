const RetentionEvent=function(){class t extends MyClass{constructor(t){super(t),this.lastRetentionDay=28,this.minHoursFromInstall=8;const e=this.store.getState().retentionEvent;this.firstRunDate=this.getFirstRunDate(),this.firstRunDate||(this.setFirstRunDate(),this.firstRunDate=this.getFirstRunDate()),this.sentDays=e.sentDays,this.completed=e.completed,this.report()}fire(t){const e="Retained {{numOfDays}}".replace("{{numOfDays}}",t);super.fire({[GA_CATEGORY_KEY]:e,[GA_ACTION_KEY]:"General",[GA_LABEL_KEY]:VERSION})}getFirstRunDate(){return this.store.getState().firstRunDate}setFirstRunDate(){this.store.dispatch(saveFirstRunDate(Date.now()))}report(){setTimeout(this.report.bind(this),36e5);const t=new Date,e=new Date(this.firstRunDate),s=this.getDateStart(e),i=this.getDateStart(t),a=Math.abs(i-s),n=Math.floor((t-e)/36e5),r=Math.floor(a/864e5);r>0&&r<=this.lastRetentionDay?!this.sentDays[r]&&n>this.minHoursFromInstall&&(this.fire(r),this.liveReport(),this.sentDays[r]=!0,this.store.dispatch(saveRetentiontDays(this.sentDays))):r>this.lastRetentionDay&&(this.sentDays[r]||(this.liveReport(),this.sentDays[r]=!0,this.store.dispatch(saveRetentiontDays(this.sentDays))))}getDateStart(t){return new Date(t.getFullYear(),t.getMonth(),t.getHours()>=0&&t.getHours()<5?t.getDate()-1:t.getDate(),5,0,1)}liveReport(){const t={[GA_CATEGORY_KEY]:"General",[GA_ACTION_KEY]:"live",[GA_LABEL_KEY]:VERSION};super.fire(t)}}return t}();