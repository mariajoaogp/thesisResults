var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function portName(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().portName;return e}function wotTraceId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().wotTraceId;return e}function lastAction(){arguments.length>0&&void 0!==arguments[0]||DefaultState.getDefaultStateObject().lastAction;let e=arguments[1];return _.merge({},e)}function experimentalFeature(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().experimentalFeature,t=arguments[1];switch(t.type){case EXPERIMENTAL_FEATURE:return _.merge({},e,t.data);default:return e}}function api(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().api,t=arguments[1];switch(t.type){case SAVE_WITNESS:return _.merge({},e,{key:t.data.key,id:t.data.id});default:return e}}function rtApi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().rtApi,t=arguments[1];switch(t.type){case SAVE_RT_WITNESS:return _.merge({},e,{key:t.data.key,id:t.data.id});default:return e}}function common(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().common,t=arguments[1];switch(t.type){case GENERATE_ID:return _.merge({},e,{[atob("Y2lk")]:t.data.id});default:return e}}function retentionEvent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().retentionEvent,t=arguments[1];switch(t.type){case SAVE_RETENTION_DAYS:return _.merge({},e,{sentDays:t.data.sentDays});case SAVE_RETENTION_COMPLETED:return _.merge({},e,{completed:!0});default:return e}}function installEventFired(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().installEventFired,t=arguments[1];switch(t.type){case SAVE_INSTALL:return!0;default:return e}}function firstRunDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().firstRunDate,t=arguments[1];switch(t.type){case SAVE_FIRST_RUN_DATE:return t.data.firstRunDate;default:return e}}function tabs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().tabs,t=arguments[1];const a={};switch(t.type){case SAVE_TABS:const r=t.data.tabs;for(const e of r)a[e.id]=_.merge({},e),t.data.activeWindow&&1==a[e.id].active&&a[e.id].windowId!=t.data.activeWindow.id&&(a[e.id].active=!1);return a;case SET_ACTIVE_TAB:const n={};for(const a in e)n[a]=_extends({},e[a],{active:a===t.data.tabId.toString()});return n;default:return e}}function whitelist(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().whitelist,t=arguments[1];switch(t.type){case ADD_TO_WHITELIST:return-1===e.indexOf(t.data.host)?[].concat(_toConsumableArray(e),[t.data.host]):e;case REMOVE_FROM_WHITELIST:const a=[];for(const r in e)t.data.host!=e[r]&&a.push(e[r]);return a;default:return e}}function templist(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().templist,t=arguments[1];switch(t.type){case ADD_TO_TEMPLIST:return[].concat(_toConsumableArray(e),[t.data.host]);case CLEAR_TEMPLIST:return DefaultState.getDefaultStateObject().templist;default:return e}}function ratings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().ratings,t=arguments[1];const a=_.merge({},e);switch(t.type){case SERP_MARK_LINKS_PENDING:const r=t.data.urls;return r&&r.length?(r.forEach(e=>{const t=getCleanDomain(e);a[t]=a[t]||RATING_PENDING}),a):e;case SAVE_RATING:const n=Object.keys(a),s=Date.now();return n>MAX_CACHE_SIZE&&n.forEach(e=>{s-a[e].updated>=STORE_RATING_PERIOD&&delete a[e]}),_.merge({},a,t.data);case CLEAR_RATING:return _.merge({},DefaultState.getDefaultStateObject().ratings);case SET_COMMENTS_COUNT:const i=t.data.host,u=e[t.data.host];u&&(u.commentsCount=t.data.count);const o={};return o[i]=u,_.merge({},e,o);default:return e}}function comments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().comments,t=arguments[1];switch(t.type){case SAVE_COMMENTS:if(Object.keys(e).length>MAX_CACHE_SIZE){const t=_.merge({},e);for(const e in t)+new Date-t[e].updated>=STORE_COMMENTS_PERIOD&&delete t[e]}const a=Object.keys(t.data)[0];if(e[a]&&e[a].count&&e[a].data.length>0){const r=_.merge({},e,{loading:!1});return r[a].data=_.concat(r[a].data,t.data[a].data),r[a].updated=+new Date,r}return _.merge({},e,t.data,{loading:!1},{updated:+new Date});case CLEAR_COMMENTS:if(t.host){const a=_.merge({},e);return delete a[t.host],a}return _.merge({},DefaultState.getDefaultStateObject().comments);case KEEP_COMMENTS:if(t.hosts){const a={};let r=!1;return t.hosts.forEach(t=>{const n=e[t];n&&(r=!0,a[t]=_extends({},n))}),r?a:e}return e;case LOADING_COMMENTS:return DefaultState.getDefaultStateObject().comments.loading=!0,_.merge({},e,DefaultState.getDefaultStateObject().comments);default:return e}}function reviews(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().reviews,t=arguments[1];const a=_.merge({},e),r=t.data&&t.data.host,n=t.data&&(t.data.userId||t.data.uid)||1,s=t.data&&t.data.rating,i=t.data&&t.data.review;let u=t.data&&t.data.rate;const o=t.data&&t.data.id;switch(r&&n&&!a[n]&&(a[n]={}),t.type){case CLEAR_USER_REVIEWS:return a[n]?(delete a[n],a):e;case UPDATE_REVIEW_TIMESTAMP:return a[n]?(a[n][r]||(a[n][r]={}),a[n][r].reviewLastUpdateTimestamp=(new Date).getTime(),a):e;case DELETE_REVIEW_TIMESTAMP:return a[n]?(a[n][r]||(a[n][r]={}),a[n][r].reviewLastUpdateTimestamp=null,a):e;case SAVE_USER_REVIEW_FROM_API:return a[t.data.uid]||(a[t.data.uid]={}),a[t.data.uid][r]=_extends({},t.data),a[t.data.uid][r].reviewLastUpdateTimestamp=(new Date).getTime(),a;case SAVE_USER_DATA:if(!a[t.data.uid]){a[t.data.uid]={};for(const e in a[1])e==t.host?(a[t.data.uid][e]=_.merge({},a[1][e]),a[1][e].step>1?a[t.data.uid][e].reviewLastUpdateTimestamp=(new Date).getTime():a[t.data.uid][e].reviewLastUpdateTimestamp=0,a[1][e]={step:0,safetyCategories:[],childSafetyCategories:[],reputationCategories:[],rating:-1}):a[t.data.uid][e]={step:0,safetyCategories:[],childSafetyCategories:[],reputationCategories:[],rating:-1}}return a;case SAVE_REVIEW:return a[n]=_.merge(a[n],i),a;case TO_NEXT_STEP:return a[n][r]&&a[n][r].step++,a[n][r].step>6&&(a[n][r].step=6),a;case TO_PREVIOUS_STEP:return a[n][r]&&a[n][r].step--,a;case OVER_NEXT_STEP:return a[n][r].step=a[n][r].step+2,a;case OVER_PREVIOUS_STEP:return a[n][r].step=a[n][r].step-2,a;case TRIPLE_NEXT_STEP:return a[n][r].step=a[n][r].step+3,a;case TRIPLE_PREVIOUS_STEP:return a[n][r].step=a[n][r].step-3,a;case RATE_SAFETY:return-1==u?(delete a[n][r].safety,u=!0):(a[n][r].safety=u,1==u&&-1===a[n][r].safetyCategories.indexOf(501)&&a[n][r].safetyCategories.push(501),a[n][r].safety&&(a[n][r].safetyCategories=[])),a;case PRESS_SAFETY_CATEGORY:return a[n][r].safetyCategories=_.xor(a[n][r].safetyCategories,[o]),a;case RATE_CHILD_SAFETY:return-1===u?(delete a[n][r].childSafety,u=!0):(a[n][r].childSafety=u,a[n][r].childSafety&&(a[n][r].childSafetyCategories=[])),a;case PRESS_CHILD_SAFETY_CATEGORY:return a[n][r].childSafetyCategories=_.xor(a[n][r].childSafetyCategories,[o]),a;case PRESS_REPUTATION_CATEGORY:return a[n][r].reputationCategories=_.xor(a[n][r].reputationCategories,[o]),a;case RATE_SITE:return a[n][r].rating=s,a;case EDIT_REVIEW:return a[n][r].step=1,a;case DELETE_REVIEW:return a[n][r]={step:0,safetyCategories:[],childSafetyCategories:[],reputationCategories:[],rating:-1},a;case DELETE_REVIEW_BEFORE_CHILD:return a[n][r].safetyCategories=[],a[n][r].reputationCategories=[],a;case DELETE_REVIEW_BEFORE_REPUTATION:return a[n][r].safetyCategories=[],a;case ADD_COMMENT:return a[n][r].comment=t.data.comment,a[n][r].timestamp=t.data.timestamp,a;default:return e}}function user(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().user,t=arguments[1];switch(t.type){case SAVE_USER_TOKEN:return _.merge({},DefaultState.getDefaultStateObject().user,{token:t.data.token});case SAVE_USER_DATA:case SAVE_USER_PLAN:return _.merge({},e,t.data);case CLEAN_USER_DATA:return{};case USER_LOGOUT:return _.merge({},DefaultState.getDefaultStateObject().user,{isLogout:!0});case ERROR_USER_AUTH:return _.merge({},DefaultState.getDefaultStateObject().user);default:return e}}function serps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().serps,t=arguments[1];switch(t.type){case SAVE_SERPS_CONF:return t.data;default:return e}}function trackerBlockerData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().trackerBlockerData,t=arguments[1];function a(e,t){return Object.keys(e).reduce((e,a)=>(e[a]=t,e),{})}switch(t.type){case LOAD_TRACKERS_LIST_COMPLETED:const r=Object.values(t.data).reduce((t,a)=>(t[a.name]=!1!==e.allowList[a.name],t),{});return _extends({},e,{list:t.data,allowList:r,reload:!0});case TRACKER_DETECTED:if(e.history.some(e=>e.name===t.data.name&&e.initiator===t.data.initiator))return e;const n=[t.data].concat(_toConsumableArray(e.history));return n.length>e.historyMaxLength&&n.pop(),_extends({},e,{history:n});case TOGGLE_BLOCK_ALL_TRACKERS:return _extends({},e,{allBlocked:t.data,allowList:a(e.allowList,!t.data),reload:!0});case UPDATE_TRACKER_ALLOW_LIST:return _extends({},e,{allowList:_extends({},e.allowList,t.data),reloadAllowList:!0});case RELOAD_TRACKERS_DATA_ON:return _extends({},e,{reload:!0});case RELOAD_TRACKERS_DATA_OFF:return _extends({},e,{reload:!1,reloadAllowList:!1});case DELETE_TRACKER_HISTORY:const s=t.data;return _extends({},e,s?{history:e.history.filter(s)}:{history:[]});default:return e}}function settings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().settings,t=arguments[1];switch(t.type){case ASSISTANT_ON:return _.merge({},e,{assistant:!0});case ASSISTANT_OFF:return _.merge({},e,{assistant:!1});case PHISHING_ON:return _.merge({},e,{phishing:!0});case PHISHING_OFF:return _.merge({},e,{phishing:!1});case ASSISTANT_SET_POSITION:return _.merge({},e,{assistantHandleTop:t.data});case ASSISTANT_SET_EXPANDED:return _.merge({},e,{assistantExpanded:t.data});case PROTECTION_ON:return _.merge({},e,{protection:!0});case PROTECTION_OFF:return _.merge({},e,{protection:!1});case PARENTAL_CONTROL_ON:return _.merge({},e,{parental:!0});case PARENTAL_CONTROL_OFF:return _.merge({},e,{parental:!1});case GAMBLING_CONTROL_OFF:return _.merge({},e,{gambling:!1});case GAMBLING_CONTROL_ON:return _.merge({},e,{gambling:!0});case PARENTAL_CONTROL_EXTRA_ICON_ON:return _.merge({},e,{parentalExtraIcon:!0});case PARENTAL_CONTROL_EXTRA_ICON_OFF:return _.merge({},e,{parentalExtraIcon:!1});case POPUP_BLOCK_OFF:return _.merge({},e,{blockPopUp:!1});case POPUP_BLOCK_ON:return _.merge({},e,{blockPopUp:!0});case POPUP_BLOCK_NOTIFICATION_OFF:return _.merge({},e,{blockPopUpNotification:!1});case POPUP_BLOCK_NOTIFICATION_ON:return _.merge({},e,{blockPopUpNotification:!0});case SET_SHIELDS_LEVEL:if("all"===t.data.id){const a=_.merge({},e.shields);for(const e in a)a[e]=t.data.level;return _.merge({},e,{shields:a})}return _.merge({},e,{shields:{[t.data.id]:t.data.level}});case SET_WARNINGS_LEVEL:return _.merge({},e,{warnings:t.data.level});case POPUP_TYPE:return _.merge({},e,{optoutPopup:t.data.optoutPopup});case UPGRADE_POPUP:const a=t.data.show?1:0,r={upgradePopUp:{show:!!a,numberOfShow:e.upgradePopUp.numberOfShow+a,firstOfferingDate:e.upgradePopUp.firstOfferingDate}};return _extends({},e,r);case MARK_FIRST_OFFERING_DATE:return _extends({},e,{upgradePopUp:_extends({},e.upgradePopUp,{firstOfferingDate:Date.now()})});default:return e}}function rateUsWidget(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().rateUsWidget,t=arguments[1];switch(t.type){case COUNT_POPUP_OPENING:return _.merge({},e,{popupOpeningCounter:e.popupOpeningCounter+1});case OFF_RATE_WIDGET:const t=new Date;return t.setMonth(t.getMonth()+2),_.merge({},e,{offRateWidget:!0,offRateTime:t});case CHECK_RATE_WIDGET_DATE:return e.offRateTime<=new Date?_.merge({},e,{offRateWidget:!1,offRateTime:""}):e;default:return e}}function mobileModal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().mobileModal,t=arguments[1];switch(t.type){case MOBILE_TRIGGER_MODAL:return _.merge({},e,{mobileModalTrigger:!0});case MOBILE_RATE_COUNT:return e.mobileModalRateCount<2?_.merge({},e,{mobileModalRateCount:e.mobileModalRateCount+1,mobileModalTrigger:!1}):_.merge({},e,{mobileModalTrigger:!0,mobileModalRateCount:0});case MOBILE_TRIGGER_MODAL_RESET:return _.merge({},e,{mobileModalTrigger:!1});default:return e}}function onboarding(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().onboarding,t=arguments[1];switch(t.type){case TO_NEXT_STEP_ONBOARDING:return _.merge({},e,{step:t.data.step||0===t.data.step?t.data.step:e.step+1});default:return e}}function cta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().cta,t=arguments[1];switch(t.type){case UPDATE_CTA_STATUS:return e.status=t.data,_.merge({},e);case UPDATE_CTA_APPEARANCE:return 3===e.appearance?e.status="dontShowAgain":e.appearance++,_.merge({},e);default:return _.merge({},e)}}function survey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().survey,t=arguments[1];switch(t.type){case UPDATE_SURVEY_STATE:return _.merge({},t.data.newSurveyState);case MAKE_SURVEY_SHOWED:return _extends({},e,{isShowed:!0});default:return _.merge({},e)}}function version(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().version,t=arguments[1];switch(t.type){case SET_SHOW_WHATS_NEW:return _extends({},e,{showWhatsNew:t.data.showWhatsNew});case SET_CURRENT_VERSION:return _extends({},e,{versionNumber:t.data.versionNumber});case WOT_UPGRADE_EVENT:return _extends({},e,{isFirstTimeUser:!1});default:return e}}function focusedReview(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().focusedReview,t=arguments[1];switch(t.type){case SET_REVIEW_IN_FOCUS:return _extends({},e,t.data);default:return e}}function phishingWhitelist(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().phishingWhitelist,t=arguments[1];switch(t.type){case PHISHING_WL_ADD:const a=Array.from(new Set([].concat(_toConsumableArray(e),_toConsumableArray(t.data))));return a.length>50?a.slice(0,50):a;case PHISHING_WL_REMOVE:return e.filter(e=>!t.data.includes(e));default:return e}}function reminders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().reminders,t=arguments[1];switch(t.type){case SET_REMINDER:var a=t.data;const r=a.name,n=a.time;return e[r]===NEVER_REMIND_AGAIN?e:_extends({},e,{[r]:n+Date.now()});case REMOVE_REMINDER:return _extends({},e,{[t.data]:NEVER_REMIND_AGAIN});default:return e}}function remoteConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultState.getDefaultStateObject().remoteConfig,t=arguments[1];switch(t.type){case UPDATE_UI_CONFIG_META:return _extends({},e,{meta:t.data});case UPDATE_UI_CONFIG_FEATURES:var a=t.data;const r=a.forDeletion,n=a.forUpdate,s=_extends({},e);return r.forEach(e=>{delete s.features[e]}),_extends({},s,{features:_extends({},s.features,n)});default:return e}}const reducers=Redux.combineReducers({portName:portName,lastAction:lastAction,api:api,rtApi:rtApi,common:common,retentionEvent:retentionEvent,installEventFired:installEventFired,firstRunDate:firstRunDate,whitelist:whitelist,templist:templist,tabs:tabs,ratings:ratings,comments:comments,reviews:reviews,user:user,serps:serps,settings:settings,rateUsWidget:rateUsWidget,experimentalFeature:experimentalFeature,mobileModal:mobileModal,onboarding:onboarding,cta:cta,survey:survey,version:version,trackerBlockerData:trackerBlockerData,focusedReview:focusedReview,phishingWhitelist:phishingWhitelist,reminders:reminders,wotTraceId:wotTraceId,remoteConfig:remoteConfig});