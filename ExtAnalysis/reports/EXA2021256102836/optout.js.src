class OptoutComponent extends React.Component{constructor(e){super(e),this.isMobile=window.innerWidth<=MOBILE_BREAK_POINT||window.innerHeight<=MOBILE_BREAK_POINT,window.onblur=()=>{webextApi.runtime.sendMessage({name:CHECK_NEXT_POPUP_STATE})}}componentDidMount(){this.isMobile=window.screen.width<=MOBILE_BREAK_POINT||window.screen.height<=MOBILE_BREAK_POINT,this.setBodyWidth()}setBodyWidth(){if(this.isMobile){document.querySelector("body.wot-popup").style.width="100vw"}}onLinkClick(){this.sendEvent("View Full Scorecard"),webextApi.runtime.sendMessage({name:OPEN_TAB_MESSAGE,url:FULL_REPORT_URL+this.props.info.host+"?utm_source=addon&utm_content=optout_popup"})}onLogoClick(){webextApi.runtime.sendMessage({name:OPEN_TAB_MESSAGE,url:MAIN_PAGE_URL+"?utm_source=addon&utm_content=optout_popup"})}sendEvent(e){const t=this.props.popupType;GA("Main opt window",e,t)}turnOn(){this.props.dispatch(turnOnProtection()),this.sendEvent("Turn on"),webextApi.runtime.sendMessage({name:RETRY_QUERY_DATA}),webextApi.runtime.sendMessage({name:TURN_ON_PROTECTION}),window.close()}render(){this.sendEvent("Open");const e=this.props.popupType,t="default"===e?"popup-optout-bk-img-default":"popup-optout-bk-img-search";return webextApi.runtime.sendMessage({name:OPEN_POPUP}),React.createElement("div",{className:"optout-popup-container"},React.createElement("div",{className:"optout-popup__body"},React.createElement("div",{className:"popup-optout-bk-img "+t}),React.createElement("div",{className:"popup-optout-title"},webextApi.i18n.getMessage(e+"ManualModeHeader")),React.createElement("div",{className:"popup-optout-subtitle"},webextApi.i18n.getMessage(e+"ManualModeText")),React.createElement("div",{className:"popup-optout-button",onClick:this.turnOn.bind(this)},React.createElement("div",{className:"popup-optout-button-Text"},webextApi.i18n.getMessage(e+"ManualModeButton"))),React.createElement("div",{className:"popup-optout-privacy-agree"},React.createElement("span",{className:"popup-optout-privacy-agree"},webextApi.i18n.getMessage("manualModeAgree")),React.createElement("a",{href:TERMS,className:"popup-optout-privacy-agree",target:"_blank",rel:"noreferrer"},webextApi.i18n.getMessage("termsOfUse")),React.createElement("span",{className:"popup-optout-privacy-agree"},webextApi.i18n.getMessage("legalAnd")),React.createElement("a",{href:PRIVACY_POLICY,className:"popup-optout-privacy-agree",target:"_blank",rel:"noreferrer"},webextApi.i18n.getMessage("legalPrivacyPolicy")))),React.createElement("div",{className:"popup-optout__footer"},React.createElement("div",{className:"popup-optout__logo",onClick:this.onLogoClick.bind(this)}),React.createElement("a",{className:"popup-optout__viewaway",onClick:this.onLinkClick.bind(this)},React.createElement("div",{className:"popup-optout_eye-icon"}),webextApi.i18n&&webextApi.i18n.getMessage("viewFullScorecard"))))}}function mapStateTpPros(e){const t=e.currentTab;return{info:{host:t&&getEncodedDomain(t.url)},popupType:e.settings.optoutPopup}}OptoutComponent=ReactRedux.connect(mapStateTpPros)(OptoutComponent);