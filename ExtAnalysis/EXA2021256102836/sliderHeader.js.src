class SliderHeader extends React.Component{constructor(e){super(e),this.store=e.store,this.state={showOffering:!1},this.safetyIconsTypes={[SAFE]:" wot-safe",[SUSPICIOUS]:" wot-suspicious",[NOT_SAFE]:" wot-not-safe",[UNKNOWN]:" wot-unknown"},this.domainNmaeHoverLock=!1,this.onRateThisSiteClick=this.onRateThisSiteClick.bind(this)}componentDidMount(){this.handleScroll()}handleScroll(){this.contentArea=document.getElementsByClassName("slider-content-area")[0],this.collapsingHeaderArea=document.getElementsByClassName("slider-header-main")[0],this.initialCollapsingAreaHeight=this.collapsingHeaderArea.offsetHeight,this.collapseBreakPoint=135;this.contentArea.addEventListener("scroll",()=>{this.collapsingHeaderArea.style.maxHeight=this.contentArea.scrollTop>this.collapseBreakPoint?"0":this.initialCollapsingAreaHeight+"px"})}onDomainHover(e){const t=e.target;if(t.offsetWidth<t.scrollWidth&&!this.domainNmaeHoverLock){this.domainNmaeHoverLock=!0,t.classList.toggle("long-host-name"),t.previousElementSibling.classList.toggle("long-host-name");const e=t.innerText.length-20;t.style.transition="text-indent ease 4s",t.style.textIndent=`-${e}ch`,setTimeout(()=>{t.style.transition="none",t.style.textIndent="initial",t.classList.toggle("long-host-name"),t.previousElementSibling.classList.toggle("long-host-name"),this.domainNmaeHoverLock=!1},4500)}}onRateThisSiteClick(e){if(e&&e.target&&"slider-reviews-count"===e.target.className)return this.props.switchTab(this.props.tabs.reviews.title),void 0;GA(GA_MAIN_CATEGORY,"Rate Site");const t=this.props.store.getState().user.uid,s=document.querySelectorAll(".reputation__star.selected");return t&&(this.props.store.dispatch(newReview(t,this.props.info.host,s.length)),this.props.switchTab(this.props.tabs.reviews.title)),s.forEach(e=>e.classList.remove("selected")),window.parent.postMessage({type:OPEN_ADD_REVIEW},"*")}onUpgradeClick(e){e||goUpgrade(GA_MAIN_CATEGORY,"upgrade header","header button")}switchTab(e){this.props.switchTab(e),this.collapsingHeaderArea.style.maxHeight=this.initialCollapsingAreaHeight+"px"}isUserReviewedSite(){var e=this.props.store.getState();const t=e.reviews,s=e.user;if(!s.uid||1===s.uid)return!1;const i=s.uid,a=this.props.info.host;return t[i]&&t[i][a]&&t[i][a].rating>-1}render(){var e=this.props.info;const t=e.host,s=e.rating,i=e.confidence,a=e.safety,r=e.faviconUrl,l=t[0].toUpperCase()+t.slice(1),o=this.safetyIconsTypes[a]||this.safetyIconsTypes[UNKNOWN],n=this.props.tabs[this.props.selectedTab],c=this.store.getState().user.isPremiumUser,h=this.isUserReviewedSite();return React.createElement("div",{className:"slider-item slider-header-wrapper",style:{left:document.getElementById(WOT_POPUP_SLIDER_CONTAINER).style.left}},React.createElement("div",{className:"slider-header-top-row"},React.createElement("div",{className:"slider-close-button",onClick:()=>toggleWOTSlider()}),React.createElement("div",{className:"slider-menu"},React.createElement(MenuButton,{host:this.props.info.host,store:this.props.store,showModal:this.props.showModal,toggleMenu:this.props.toggleMenu})),React.createElement(SliderOffering,{isPremium:c,showOffering:this.state.showOffering,toggleShowOffering:e=>this.setState({showOffering:e})}),React.createElement("div",{className:"slider-site-name-stripe "+(this.state.showOffering?" background":"")},React.createElement("div",{className:"slider-domain-logo small-logo",style:{marginLeft:l.length>25?"20px":"unset"}},React.createElement("img",{src:r,alt:l[0]})),React.createElement("div",{className:"slider-domain-name",onMouseEnter:this.onDomainHover.bind(this)},l)),React.createElement("div",{className:"top-row-bottom-line"})),React.createElement("div",{className:"slider-header-main"+(s?"":" wot-na-site")},React.createElement("div",{className:"slider-logo-score-row"},React.createElement("div",{className:"slider-main-score"},React.createElement(ReputationBubble,{isSlider:!0,sliderAction:this.onRateThisSiteClick,rating:+s,confidence:+i,comments:this.props.comments}))),s?React.createElement("div",{className:"slider-header-rate-button",onClick:this.onRateThisSiteClick.bind(this)},React.createElement("div",{className:"rate-button-icon"}),translate(h?"editYourReview":"rateThisWebsite")):React.createElement("div",{className:"slider-rate-them"},React.createElement("div",{className:"slider-rate-them-title"},translate("firstRate")),React.createElement("div",{className:"slider-rate-them-subtitle"},translate("rateYourExperience"),React.createElement("span",null," ",t)))),React.createElement("div",{className:"slider-tabs-selector"},React.createElement("div",{className:"tabs-wrapper"},Object.values(this.props.tabs).map(e=>React.createElement("div",{className:"tab-in-selector"+(e.title===n.title?" selected-tab":""),onClick:()=>this.switchTab(e.title)},React.createElement("div",{className:`tab-icon ${e.title}${e.title===n.title?" selected-tab":""}${o}`}),React.createElement("div",{className:"tab-name"},translate(e.title))))),React.createElement("div",{className:"tabs-selector-indicator",style:{left:n.leftPos}})))}}