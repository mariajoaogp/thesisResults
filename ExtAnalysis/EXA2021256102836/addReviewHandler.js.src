class AddReviewHandler{static closeAddReview(e){return e&&e.stopPropagation()&&e.preventDefault(),e&&e.target.id!==ADD_REVIEW_CONTAINER_ID||(()=>{const e=document.getElementById(ADD_REVIEW_CONTAINER_ID);e&&(e.style.opacity="0",setTimeout(()=>{e.remove()},700))})(),!1}constructor(e){this.iframe=null,window.addEventListener("message",t=>{const i=t.data;if(i){if(i.type===OPEN_ADD_REVIEW&&!document.getElementById(ADD_REVIEW_CONTAINER_ID)){const t=document.createElement("div");t.addEventListener("mousedown",AddReviewHandler.closeAddReview,!0),t.id=ADD_REVIEW_CONTAINER_ID,this.iframe=document.createElement("iframe"),t.appendChild(this.iframe),document.body.appendChild(t);if(!!e.getState().user.uid)return document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&AddReviewHandler.closeAddReview()}),this.iframe.src=""+webextApi.runtime.getURL("/addReview.html"),setTimeout(()=>{this.iframe.contentWindow.focus()},800),void 0;this.iframe.className="wot-logged-out-iframe",this.iframe.src=`${webextApi.runtime.getURL("/loggedOut.html")}?doamin_source=${location.hostname.replace(/^www\d*\./,"")}`}i.type===CLOSE_ADD_REVIEW&&AddReviewHandler.closeAddReview()}})}}