class ShieldOnBoarding extends React.Component{constructor(t){super(t),this.state={shoudlShowAnimation:!0,step:t.onboarding.step,isHidden:!0},GA("Onboarding",this.props.onboarding.step+" Step Show",window.location.hostname),this.clickOnTooltipBtn=this.clickOnTooltipBtn.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.destroyAnimation=this.destroyAnimation.bind(this),this.toNextStep=this.toNextStep.bind(this),window.addEventListener("click",e=>{const s=this.state.step;4===s&&this.toNextStep(5),0!==s&&t.closePopup()})}componentDidMount(){this.state.step<5&&setTimeout(()=>this.setState({isHidden:!1}),150)}clickOnTooltipBtn(t){GA("Onboarding",this.props.onboarding.step+" Step Click",window.location.hostname),t.stopPropagation(),this.toNextStep()}toNextStep(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=t||this.state.step+1;this.props.dispatch(toNextStepOnboarding(t)),this.setState({step:e})}clickOnLearnMore(){GA("Onboarding","Learn More"),webextApi.runtime.sendMessage({name:OPEN_TAB_MESSAGE,url:LEARN_MORE_URL})}onCloseClick(){const t=this.props.closePopup,e=this.state.step;if(GA("Onboarding","Skip","Step "+e),e>0)return this.toNextStep(5);t(),this.toNextStep()}getSafety(t){switch(t){case SAFE:return translate("trusted").toLowerCase();case SUSPICIOUS:return translate("suspicious").toLowerCase();case NOT_SAFE:return translate("untrusted").toLowerCase();case UNKNOWN:return translate("unknown").toLowerCase()}}getHeaderText(t){switch(t){case 0:return"ðŸŽ‰ "+translate("welcomeToWot");case 1:return translate("onBoardingReputationScore");case 2:return translate("onBoardingReputationDashboard");case 3:return translate("websiteCategories");case 4:return"âœ… "+translate("onBoardingYoureAllSet")}}getFirstStep(){return`<div class=shield-tooltip_1__container>\n                    <span>${translate("onBoardingHoverTheShield")}</span>\n                    <span class=shield-tooltip_1__container-text>${translate("onBoardingCheckWebsiteRep")}</span>\n                <div>`}getSecondStep(t){return`<div class=shield-tooltip_2__container>\n                    <div class=shield-tooltip_2__container-content>\n                        <div class=shield-tooltip_2__container-content_text>\n                            <div>${translate("onBoardingThisWebsiteIs").replace("%SAFETY%",this.getSafety(t))}</div>\n                            <div>${translate("onBoarding4States")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_green"></div>\n                            <div class=trusted>${translate("trustedByWOTPopup")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_orange"></div>\n                            <div class=suspicious>${translate("suspiciousByWOTPopup")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_red"></div>\n                            <div class=untrusted>${translate("untrustedByWOTPopup")}</div>\n                        </div>\n                        <div class=shield-tooltip_2__container-content_state>\n                            <div class="shield shield_gray"></div>\n                            <div class=unknown>${translate("unknownByWOTPopup")}</div>\n                        </div>\n                    </div>\n                </div>`}getThirdStep(){return`<div class=class=shield-tooltip_3__container>\n                    <div class=shield-tooltip_3__container-content>\n                        <span>${translate("onBoardingThisPopupShows")}</span>\n                        <span class=shield-tooltip_3__container-content_bold>${translate("onBoardingYouCanClick")}</span>\n                    </div>\n                </div>`}getFourthStep(){return`<div class=class=shield-tooltip_3__container>\n                    <div class=shield-tooltip_3__container-content>${translate("onBoardingWebsiteCategories")}</div>\n                </div>`}getFifthStep(){return`<div class=class=shield-tooltip_5__container>\n                    <div class=shield-tooltip_5__container-content>${translate("onBoardingSafelyBrowse")}</div>\n                </div>`}destroyAnimation(){this.setState({shoudlShowAnimation:!1})}render(){var t=this.props;const e=t.childSafety,s=t.safety;var i=this.state;const n=i.shoudlShowAnimation,o=i.step,a=i.isHidden;if(o>=5)return React.createElement("i",null);const l="shield-tooltip shield-tooltip_"+(o+1);let r="",d=0;const c=e===NOT_SAFE;let h=c?340:310;switch(o){case 0:r={__html:this.getFirstStep()},d=-131,h=-135;break;case 1:r={__html:this.getSecondStep(s)},d=c?-40:-32;break;case 2:r={__html:this.getThirdStep()},d=-41;break;case 3:r={__html:this.getFourthStep()},d=c?47:7,h=c?-263:-230;break;case 4:r={__html:this.getFifthStep()},d=c?55:-5,h=c?-263:-230}return React.createElement("div",{className:l,style:{top:d+"px",left:h+"px",opacity:Number(!a)},ref:t=>this.ref=t},React.createElement("div",{className:"shield-tooltip__container-header"},React.createElement("div",{className:"shield-tooltip__container-header_text"},this.getHeaderText(o)),React.createElement("div",{className:"shield-tooltip__container-header_right"},o<4&&React.createElement("div",{className:"shield-tooltip__container-header_step"},o+1+"/4"),React.createElement("div",{onClick:this.onCloseClick,className:"shield-tooltip-close"}))),React.createElement("div",{style:{width:"100%"},dangerouslySetInnerHTML:r}),4===o&&n&&React.createElement(LottieAnimation,{onAnimationComplete:this.destroyAnimation,className:"shield-tooltip_5-confetti",animationName:"onboarding-confetti.json",loop:!1}),o>0&&React.createElement("div",{className:"shield-tooltip__footer"},4===o&&React.createElement("span",{className:"shield-tooltip__footer-link",onClick:this.clickOnLearnMore},translate("whatsNewWOTLearnMore")),React.createElement("span",{className:"shield-tooltip__btn shield-tooltip__footer-link",onClick:this.clickOnTooltipBtn},translate(4!==o?"next":"gotit"))))}}