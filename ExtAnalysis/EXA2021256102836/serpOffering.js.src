const NO_PROTECTION_WIDTH="320px",GMAIL_NO_PROTECTION=".wot-mail-not-protected";class SerpOffering extends React.Component{constructor(e){super(e),this.WLCandidates=[],this.state={showOffering:!1,isFirstReminder:!0}}componentDidMount(){var e=this.handleReminders();const t=e.showOffering,i=e.isFirstReminder;t&&setTimeout(this.show.bind(this),1e3),this.setState({showOffering:t,isFirstReminder:i}),GA("Gmail Protection","popup","shown")}handleReminders(){const e=this.props.reminders[REMINDER_TYPES.GMAIL_PROTECTION];return e?e===NEVER_REMIND_AGAIN?{showOffering:!1,isFirstReminder:!1}:Date.now()>e?this.tempHandleShowLastTime(e)||{showOffering:!0,isFirstReminder:!1}:{showOffering:!1,isFirstReminder:!1}:{showOffering:!0,isFirstReminder:!0}}setReminder(e,t){"x"!==t||e||this.removeReminder(),GA("Gmail Protection","popup",t+" clicked"),this.props.setReminder(ONE_WEEK),this.hide()}tempHandleShowLastTime(e){if(-1===e)return GA("Gmail Protection","popup","showing-one-last-time"),this.props.removeReminder(),{showOffering:!0,isFirstReminder:!1}}removeReminder(){GA("Gmail Protection","popup","dont-show-again"),this.props.removeReminder(),this.hide()}takeTheOffer(){this.removeReminder(),goUpgrade("Gmail Protection","popup","gmail_protection_clicked")}hide(){const e=document.querySelector(GMAIL_NO_PROTECTION);e&&(e.style.right="-320px")}show(){const e=document.querySelector(GMAIL_NO_PROTECTION);e&&(e.style.right="32px")}render(){var e=this.state;const t=e.showOffering,i=e.isFirstReminder;return t?React.createElement("div",{className:"wot-mail-not-protected"},React.createElement("div",{className:"wot-mail-not-protected-icons"},React.createElement(SvgIcon,{svg:"wot-logo",className:"wot-mail-not-protected-logo"}),React.createElement(SvgIcon,{svg:"mail-serp-envelop",className:"wot-mail-not-protected-envelop"}),React.createElement(SvgIcon,{svg:"mail-serp-cross",className:"wot-mail-not-protected-close",onClick:()=>this.setReminder(i,"x")})),React.createElement("div",{className:"wot-mail-not-protected-title"},translate("serpMailWarningOfferTitle")),React.createElement("div",{className:"wot-mail-not-protected-text"},translate("serpMailWarningOfferContent")),React.createElement("div",{className:"wot-mail-not-protected-action1",onClick:()=>this.takeTheOffer()},React.createElement(SvgIcon,{svg:"white_lightning.svg",className:"wot-mail-not-protected-action1-icon"}),translate("serpMailWarningOfferAction1")),React.createElement("div",{className:"wot-mail-not-protected-action2",onClick:()=>this.setReminder(i,"btn")},translate("serpMailWarningOfferAction2"))):React.createElement("div",null)}}function mapStateToProps(e){return{reminders:e.reminders,isPremium:e.user.isPremiumUser}}function mapDispatchToProps(e){return{setReminder:t=>e(setReminder(REMINDER_TYPES.GMAIL_PROTECTION,t)),removeReminder:()=>e(removeReminder(REMINDER_TYPES.GMAIL_PROTECTION)),turnOnPhishing:()=>e(turnOnPhishing())}}SerpOffering=ReactRedux.connect(mapStateToProps,mapDispatchToProps)(SerpOffering);