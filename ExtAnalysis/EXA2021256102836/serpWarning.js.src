const WARNING_INITIAL_HEIGHT="48px",GMAIL_WARNING=".wot-mail-serp-warning";class SerpWarning extends React.Component{constructor(t){super(t),this.WLCandidates=[]}componentDidMount(){setTimeout(this.show.bind(this),500)}getWarningLevel(){var t=this.props;const e=t.links,i=t.ratings,s=t.whiteList;let a="";return e.forEach(t=>{if(!i[t])return;const e=i[t].safety;[NOT_SAFE,SUSPICIOUS].includes(e)&&!s.includes(t)&&(this.WLCandidates.push(t),(e===NOT_SAFE||!a&&e===SUSPICIOUS)&&(a=e))}),a.toLowerCase()}addToPhishingWhitelist(){GA("Gmail Protection","Look safe",this.WLCandidates[0]),this.hide(),setTimeout(()=>{this.props.addToPhishingWhitelist(this.WLCandidates)},1e3)}hide(){const t=document.querySelector(GMAIL_WARNING);t&&(t.style.maxHeight="0")}show(){const t=document.querySelector(GMAIL_WARNING);t&&(t.style.maxHeight="48px")}render(){const t=this.getWarningLevel();return t?React.createElement("div",{className:"wot-mail-serp-warning wot-level-"+t},React.createElement("div",{className:"wot-warning-left-side"},React.createElement(SvgIcon,{className:"wot-mail-serp-icon",svg:`warning-${t}.svg`}),React.createElement("div",{className:"wot-mail-serp-text"},translate("serpMailWarning")),React.createElement("div",{className:"wot-mail-serp-button",onClick:()=>this.addToPhishingWhitelist()},translate("looksSafe"))),React.createElement("div",{className:"wot-warning-right-side"},React.createElement("div",{className:"wot-mail-serp-tooltip"},React.createElement(TitleWithTooltip,{openBelow:!0,align:"right",width:215,tooltip:"serpMailWarningTooltip",titleIconSvg:`tooltip-${t}.svg`,tooltipClass:"dark-tooltip"})),React.createElement(SvgIcon,{className:"wot-mail-serp-close",svg:`cross-${t}.svg`,onClick:()=>this.hide(GMAIL_WARNING)}))):React.createElement("div",null)}}function mapStateToProps(t){return{ratings:t.ratings,whiteList:t.phishingWhitelist}}function mapDispatchToProps(t){return{addToPhishingWhitelist:e=>t(addToPhishingWhitelist(e))}}SerpWarning=ReactRedux.connect(mapStateToProps,mapDispatchToProps)(SerpWarning);